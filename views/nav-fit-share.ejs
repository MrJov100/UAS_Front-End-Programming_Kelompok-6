<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style-workout.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/theme.css" />
    <link rel="stylesheet" href="/css/backToTopButton.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/css/navbar.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="/scripts/theme-toggle.js"></script>
    <script src="/scripts/backToTopButton.js"></script>
    <script src="/scripts/footer.js"></script>

  </head>
  <body>
    <!-- TOMBOL Back to Top -->
    <button id="backToTopBtn" class="back-to-top">
      <img
        src="/assets/images/green-up.png"
        alt="Back to Top"
        id="backToTopImg"
      />
    </button>

    <nav id="navbar">
      <input type="checkbox" id="check" />
      <label for="check" class="checkbtn">
        <i class="fas fa-bars"></i>
      </label>

      <a href="index.html" id="logo"
        ><img src="/assets/images/logo.png" alt="FitSteps Logo"
      /></a>

      <div class="navbar-biasa">
        <a href="/">Home</a>
        <a href="/fit-share">Fit Share</a>
        <a href="/trendy-shoes">Trendy Shoes</a>
        <a href="/health-benefits">Health Benefits</a>
        <a href="/contact-us">Contact Us</a>
        <a href="/events">Upcoming Events</a>
        <a href="/profile">Profile</a>
        <a href="/logout">Logout</a>

        <!-- Tombol Mode Terang/Gelap -->
        <button id="themeToggleBtn" class="theme-toggle-btn">ðŸŒ™</button>
      </div>

      <a href="index.html" id="moto"
        ><img src="/assets/images/moto.png" alt="FitSteps Moto"
      /></a>
    </nav>


    <!-- ISI -->

    <div class="content-container">

      <div class="post-button">
        <button id=showPopup class="btn btn-primary" type="button">+</button>
      </div>

      <div id="popupForm" class="popup-form">
        <div class="popup-content">
          <button id="closePopup" class="close-btn-tutup">&times;</button>
          <form id="postForm" action="/upload" method="POST" enctype="multipart/form-data">
            <div class="mb-3">
              <label for="imageInput" class="form-label">Unggah Foto</label>
              <input 
                type="file" 
                class="form-control" 
                id="imageInput" 
                name="photo" 
                accept="image/*" 
                required 
              />
            </div>
            <div class="mb-3">
              <label for="captionInput" class="form-label">Caption</label>
              <textarea
                class="form-control" 
                id="captionInput"
                name="caption"
                rows="3"
                placeholder="Tulis caption di sini..."
                required
              ></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>

      <div id="postContainer" class="mt-4">
        <% if (uploads && uploads.length > 0) { %>
          <% uploads.forEach(function(post) { %>
            <div class="card mb-3">
              <div class="row g-0">
                <div class="col-md-8">
                  <img src="<%= post.photo_url %>" class="img-fluid" alt="Uploaded Image"></img>
                </div>
                <div class="col-md-4">
                  <div class="card-body">
                    <h5 class="card-title"><%= post.nama_lengkap %></h5>
                    <p class="card-text"><%= post.caption %></p>
                  </div>
                </div>
              </div>
            </div>
          <% }); %>
        <% } else { %>
          <p class="text-center mt-4">No one has posted yet, be the first!</p>
        <% } %>
      </div>
    </div>

    <div id="footer-placeholder"></div>

    <script>
      document.getElementById("showPopup").addEventListener("click", function() {
        document.getElementById("popupForm").style.display = "block";
      });

      document.getElementById("closePopup").addEventListener("click", function() {
        document.getElementById("popupForm").style.display = "none";
      });
    </script>

  </body>
</html>
